---
title: "Configure WAAP for a new domain"
sidebarTitle: "Configure WAAP for a new domain"
---

Web Application and API Protection (WAAP) is a single SaaS tool that combines all aspects of website security and traffic management, including Layer 7 DDoS protection, and web application security.

To secure your application with WAAP, you need to create a Gcore CDN resource for your domain, enable WAAP protection in the resource settings, and then verify that everything works as expected and you don't block legitimate traffic. The following steps will guide you through this process and help you configure WAAP according to your requirements.

<Tip>
  **Tip**

  After you enable WAAP, all traffic will be diverted to our network, and it may cause a temporary disruption for your users. We recommend setting up Gcore WAAP during a low-traffic period to minimize the impact.
</Tip>

## Step 1. Create a CDN resource

To secure your web application and APIs with Gcore WAAP, it's necessary to create a CDN resource associated with your website's origin. If you also need to add an SSL certificate, check out the [Add an SSL certificate to deliver content over HTTPS](/cdn/ssl-certificates/add-an-ssl-certificate-to-deliver-content-over-https) guide.

<Info>
  **Info**

  When configuring a resource, you need to update your domain's DNS records so they point to our network. This is necessary to allow all traffic to pass through WAAP.
</Info>

<Tabs>
  <Tab title="Create a resource with Gcore Managed DNS">
    If you don't have Gcore CDN configured, follow the instructions from this guide: [Create a CDN resource for the entire site](/cdn/getting-started/create-a-cdn-resource/create-a-cdn-resource-for-the-entire-site).
  </Tab>
  <Tab title="Create a resource with your DNS provider">
    If you want to use a custom DNS provider, configure the resource according to the following steps.

    1. Go to the [CDN page](https://cdn.gcore.com/resources/list) and click **Create CDN resource**.

    <Frame>
      ![CDN page in the Customer Portal](/images/docs/waap/getting-started/create-cdn-resource-button.png)
    </Frame>

    2. In the **Add domain** field, enter your domain name. For example, `waap.mydomain.com`.

    3. Select the **Do not delegate** option to use CDN without changing your DNS provider.

    4. Enable the **Enable WAAP** toggle to activate Web Application and API Protection for your domain.

    5. In the **Origin** section, configure your content origin:

       - Select **Specify content origin** to enter your origin server details.
       - Keep the **Use default Origin group name** toggle enabled, or disable it to specify a custom name.
       - From the **Type of origin authentication** dropdown, select the authentication method if required, or keep it set to **None**.
       - In the **Origin source** field, enter your origin server IP address or domain name.
       - Keep the **Use default port** checkbox selected to use port 80, or deselect it to specify a custom port.

    <Frame>
      ![Create CDN resource form](/images/docs/waap/getting-started/create-cdn-resource-form.png)
    </Frame>

    6. Click **Create** to create the CDN resource.

    7. After the resource is created, copy the generated CNAME and add it to your DNS configuration at your DNS provider.

    #### Finalize the settings

    Once your CDN resource is created, configure the Host header setting:

    1. Open your CDN resource settings and navigate to the **HTTP headers** section.

    2. Click **Host header** and enable the **Change Host header** toggle.

    3. Select the **Forward Host header** option to forward the original Host header from client requests to your origin server.

    <Frame>
      ![Host header configuration](/images/docs/waap/getting-started/host-header-config.png)
    </Frame>

    <Info>
      **Info**

      The **Always online** option is automatically disabled when WAAP is enabled and cannot be changed.
    </Info>
  </Tab>
</Tabs>

## Step 2. Enable WAAP in CDN resource settings

Once your CDN resource is set up, you can activate WAAP protection for it. Refer to the [Protect CDN resources with Gcore WAAP](/cdn/cdn-resource-options/cdn-security/protect-cdn-resources-with-basic-waf) guide for detailed instructions.

## Step 3. Use WAAP in Monitoring mode

After you enable WAAP, it will be automatically set to the [Monitoring mode](/waap/getting-started/waap-modes#monitoring-mode). In this mode, all incoming requests are inspected, but no action is taken. It's best to use Monitoring mode for several days before enabling the [Protection mode](/waap/getting-started/waap-modes#protection-mode) to make sure that all security settings work correctly.

Completing this step is important because it allows you to analyze requests and test the WAAP behavior before you fully activate it.

<Warning>
  **Warning**

  In Monitoring mode, all traffic is allowed to your domain, regardless of configured security rules and policy groups. This mode is only recommended for testing WAAP settings.
</Warning>

## Step 4. View your domain traffic

While keeping WAAP in Monitoring mode, you can view all logged requests and check the corresponding actions that WAAP will take once you put it in Protection mode.

Go through the [Events pages](/waap/analytics) to detect common traffic patterns and understand if the current configuration requires any adjustments.

For instance, you can find information about incoming web requests on the **Events** page in the **Requests** table:

1. In the [Gcore Customer Portal](https://accounts.gcore.com/reports/dashboard), navigate to **WAAP** \> **Domains**.

<Frame>
  ![Domains page in the Customer Portal](/images/docs/waap/getting-started/domains-waap-page.png)
</Frame>

2. Find the needed domain and click its name to open it. You'll be directed to the **Overview** page.

3. In the sidebar, click **Events**.

4. Review the information under **Requests**.

<Frame>
  ![Events page in the Customer Portal showing Requests table](/images/docs/waap/getting-started/waap-requests-table.png)
</Frame>

5. You can also filter requests to get more granular information about your traffic:

- **All Actions**: Filter requests by action type (Blocked, Monitored, Allowed, Passed, Captcha, JS Challenge).
- **Select Countries**: Filter requests by country of origin.
- **Response Codes**: Filter by HTTP response codes.
- **HTTP Methods**: Filter by request method (GET, POST, etc.).

To view more information about a request, click the request ID and inspect the [Request Details](/waap/analytics#request-details) page.

<Frame>
  ![Request details section open from the Events page](/images/docs/waap/getting-started/request-details-overview.png)
</Frame>

The screenshot above depicts a request that was blocked because of the [SQL injection](/waap/waap-policies/waf-and-owasp-top-threats) policy. It blocks requests if there is evidence that the request contains malicious SQL code.

## Step 5. Test your WAAP configuration

To achieve the desired WAAP behavior, we recommend that you navigate through your website as both a user and administrator.

Navigating the website will generate entries in the [Requests](/waap/analytics#requests-table) table. You can use this information to determine if you need to create [Firewall rules](/waap/ip-security/allow-and-block-ip-addresses) or [custom WAAP rules](/waap/waap-rules/custom-rules) for some requests and let them access your website's content.

Specifically, review requests that relate to:

- **Your origin IP**: IP address assigned to your device.
- **Your office IP**: IP address assigned to your device within your office's network.
- **Your workstation IP**: IP address assigned to a workstation or specific computer in a network.

If you notice that WAAP will block such requests in Protection mode, you need to update your settings to prevent such a situation. You can find detailed instructions on how to update your settings in the following step.

Check out the [allow and block IP addresses](/waap/ip-security/allow-and-block-ip-addresses) guide for more information.

## Step 6. Allow admins, bots, and CMS

Before WAAP is in Protection mode, you need to ensure that critical IP addresses, content management systems (CMS), and known bots are allowed to make successful requests.

Check the [WAAP policy groups](/waap/waap-policies) for a full list of security policies and their detailed overview.

### Allow admin IP addresses

If your domain doesn't use a CMS, we highly recommend allowlisting the site administrator's IP address:

1. In the [Gcore Customer Portal](https://accounts.gcore.com/reports/dashboard), navigate to **WAAP** \> **Firewall**.

<Frame>
  ![Firewall page in the Customer Portal](/images/docs/waap/getting-started/firewall-add-rules.png)
</Frame>

2. Select the needed domain from the domain dropdown.

3. In the **Allowed IPs** tab, click **Add IP/IP range**.

4. Enter any admin user's public IP address.

5. Click **Save**.

Repeat these steps if needed.

### Allow CMS

If you use content management systems, such as WordPress, allow traffic for CMS admins:

1. In the [Gcore Customer Portal](https://accounts.gcore.com/reports/dashboard), navigate to **WAAP** \> **Default Rules**.

2. Select the needed domain from the domain dropdown.

3. Click the **CMS Protection** tab.

4. Find the desired content management system and change its mode to **Allow** by clicking on the mode dropdown next to it.

<Frame>
  ![Default Rules page with CMS Protection tab](/images/docs/waap/getting-started/cms-protection.png)
</Frame>

<Tip>
  **Tip**

  The **WordPress WAF ruleset** policy is enabled by default.
</Tip>

### Allow known bots

Follow these steps to allow crawlers, scanners, monitoring bots, and similar tools to access your website:

1. In the [Gcore Customer Portal](https://accounts.gcore.com/reports/dashboard), navigate to **WAAP** \> **Bot Management**.

2. Select the needed domain from the domain dropdown.

3. Click the **Known Bots** tab and enable the desired bot by changing its mode to **Allow**.

<Frame>
  ![Bot Management page with Known Bots tab](/images/docs/waap/getting-started/automated-services.png)
</Frame>

The [Known Bots](/waap/waap-policies/known-bots) list allows several trusted bots by default, which is why we recommend reviewing this list before enabling Protection mode.

## Step 7. Configure your APIs

If you plan to serve JSON requests through an API on your domain, you can disable the JavaScript injection and CAPTCHA functionalities for specified API endpoints.

You can [manually add endpoints to API base path](/waap/api-discovery-and-protection/configure-api-base-path) or [configure the API Discovery feature](/waap/api-discovery-and-protection/api-discovery) to automatically detect and protect your APIs.

## Step 8. Enable Protection mode

1. In the [Gcore Customer Portal](https://accounts.gcore.com/reports/dashboard), navigate to **WAAP** \> **Domains**.

2. Find the needed domain in the list.

3. In the **WAAP domain mode** column, click the mode dropdown and select **Protection**. WAAP will begin to inspect and act upon incoming requests.

<Frame>
  ![WAAP modes dropdown on Domains page](/images/docs/waap/getting-started/protect-mode.png)
</Frame>

## Step 9. Block non-Gcore traffic

After successful DNS propagation and verifying that domain-based traffic is being handled by WAAP, ensure that all requests to your domain are routed through Gcore servers. This is necessary to prevent unauthorized traffic from bypassing WAAP and directly reaching your domain.

- [Add our CDN servers to the allowlist](/cdn/getting-started/configure-an-origin/add-cdn-servers-to-the-origin-acl-whitelist).
- Block other incoming requests that don't match our allowlist.
